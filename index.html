<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#fff7fb" />
  <title>For Jalina üíó</title>

  <style>
    :root{
      --safe-top: env(safe-area-inset-top);
      --safe-bottom: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);

      --text:#1f2430;
      --muted:#5b6475;
      --accent:#ff5aa5;
      --accent2:#6c7cff;

      --btn-shadow: 0 14px 28px rgba(20,20,40,.12);
      --btn-radius: 18px;
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    html, body{ height:100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      -webkit-text-size-adjust:100%;
      overflow-x:hidden;
      overflow-y:auto; /* allow vertical scrolling */
      color:var(--text);
      background:#fff7fb;
    }

    /* Soft animated background (light) */
    .bg{
      position:fixed; inset:-60px;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(255,90,165,.22) 0%, transparent 62%),
        radial-gradient(900px 600px at 80% 10%, rgba(108,124,255,.18) 0%, transparent 62%),
        radial-gradient(900px 600px at 50% 95%, rgba(34,197,94,.12) 0%, transparent 62%),
        linear-gradient(135deg, #fff7fb, #f2fbff);
      animation: drift 10s ease-in-out infinite alternate;
      transform: translateZ(0);
      filter: saturate(1.05);
      z-index:-1;
    }
    @keyframes drift{
      0%{ transform: scale(1) translate(0,0); }
      100%{ transform: scale(1.03) translate(-10px, 8px); }
    }

    /* App layout (safe areas) */
    .app{
      position:relative;
      min-height:100%;
      padding:
        calc(18px + var(--safe-top))
        calc(18px + var(--safe-right))
        calc(18px + var(--safe-bottom))
        calc(18px + var(--safe-left));
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .page{
      display:none;
      width: min(600px, 100%);
      min-height: calc(100vh - (18px + var(--safe-top)) - (18px + var(--safe-bottom)));
      padding: 8px 0;
      overflow-y: auto;                  /* page scroll */
      -webkit-overflow-scrolling: touch;  /* smooth iOS scroll */
    }
    .page.active{ display:block; }

    /* Responsive typography */
    h1{
      margin:0 0 10px;
      line-height:1.06;
      letter-spacing:.2px;
      font-size: clamp(26px, 7vw, 36px);
      font-weight: 1000;
    }
    h2{
      margin:0 0 10px;
      line-height:1.06;
      letter-spacing:.2px;
      font-size: clamp(24px, 6.5vw, 32px);
      font-weight: 1000;
    }
    p{
      margin:0;
      font-size: clamp(16px, 4.6vw, 18px);
      line-height:1.55;
      color: var(--muted);
    }

    .center{
      min-height: 100%;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:14px;
    }

    .row{
      display:flex;
      gap:12px;
      margin-top: 14px;
      width:100%;
      flex-wrap: wrap; /* allow wrap on narrow phones */
    }

    button{
      border:0;
      border-radius: var(--btn-radius);
      padding: 14px 14px;
      font-size: 17px; /* prevents iOS zoom */
      font-weight: 950;
      cursor:pointer;
      min-height: 54px;
      box-shadow: var(--btn-shadow);
      transition: transform .08s ease, filter .2s ease;
      user-select:none;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .yes{
      flex:1;
      min-width: 140px;
      color:white;
      background: linear-gradient(135deg, #34d399, #22c55e);
    }
    .no{
      flex:1;
      min-width: 140px;
      color:#2d3341;
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(8px);
    }
    .primary{
      width:100%;
      color:white;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
    }

    .noHint{
      margin-top: 6px;
      font-size: 14px;
      font-weight: 900;
      color: rgba(31,36,48,.55);
      text-align:center;
    }

    /* Prompt area (larger text + responsive images) */
    .promptLine{
      display:flex;
      align-items:flex-start;
      gap:12px;
      margin-top: 12px;
    }
    .promptText{
      font-size: clamp(18px, 5.2vw, 26px);
      font-weight: 1000;
      color: rgba(31,36,48,.92);
      line-height: 1.12;
      flex: 1;
    }
    .promptMedia{
      margin-left:auto;
      width: clamp(120px, 36vw, 170px);
      height: clamp(120px, 36vw, 170px);
      border-radius: clamp(22px, 6vw, 34px);
      object-fit: cover;
      box-shadow: 0 30px 90px rgba(20,20,40,.18);
      display:none;
      flex: 0 0 auto;
    }
    .promptEmoji{
      margin-left:auto;
      font-size: 62px;
      display:none;
      flex: 0 0 auto;
    }

    /* Invitation layout: responsive big text + bottom image */
    .inviteLayout{
      display:flex;
      flex-direction:column;
      gap:14px;
      padding-top: 10px;
      min-height: 100%;
    }
    .inviteBigText{
      font-size: clamp(20px, 5.8vw, 28px);
      font-weight: 950;
      color: rgba(31,36,48,.92);
      line-height: 1.2;
    }
    .bottomImg{
      margin-top:auto;
      width:100%;
      height: clamp(240px, 38vh, 420px);
      border-radius: clamp(24px, 7vw, 36px);
      overflow:hidden;
      box-shadow: 0 30px 90px rgba(20,20,40,.16);
      position:relative;
      background: rgba(255,255,255,.35);
    }
    .bottomImg img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      transform: scale(1.02);
    }
    .softOverlay{
      position:absolute; inset:0;
      background: radial-gradient(900px 460px at 50% 12%, rgba(255,255,255,.58), transparent 60%);
      mix-blend-mode: screen;
      pointer-events:none;
    }

    /* Hearts overlay (reduced for performance) */
    .hearts{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      display:none;
      z-index: 50;
    }
    .heart{
      position:absolute;
      font-size: 24px;
      animation: floatUp 3.8s ease-in forwards;
      opacity: .95;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.12));
    }
    @keyframes floatUp{
      0%{ transform: translateY(20px) scale(.9); opacity:0; }
      12%{ opacity:1; }
      100%{ transform: translateY(-110vh) scale(1.18); opacity:0; }
    }

    /* Fireworks canvas + yay */
    .fw{
      position:fixed; inset:0;
      pointer-events:none;
      display:none;
      z-index: 40;
    }
    .yayText{
      font-size: clamp(44px, 12vw, 66px);
      font-weight: 1000;
      letter-spacing: .6px;
      color: rgba(31,36,48,.92);
      text-align:center;
      line-height:1;
      margin-top: 10vh;
      text-shadow: 0 24px 60px rgba(20,20,40,.14);
    }

    /* Fullscreen overlay image (IMG_2536) */
    .overlay{
      position:fixed;
      inset:0;
      z-index:9999;
      display:none;
      background:#000;
    }
    .overlay img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    /* Poster page (smaller image + title + Next button) */
    .posterLayout{
      display:flex;
      flex-direction:column;
      gap:14px;
      padding-top: 10px;
      min-height: 100%;
    }
    .posterTitleTop{
      font-size: clamp(24px, 6.2vw, 34px);
      font-weight: 1000;
      color: rgba(31,36,48,.92);
      line-height: 1.06;
      margin-bottom: 4px;
    }
    .posterFrame{
      width:100%;
      height: clamp(320px, 52vh, 520px);
      border-radius: clamp(24px, 7vw, 36px);
      overflow:hidden;
      box-shadow: 0 34px 110px rgba(20,20,40,.18);
      background: rgba(255,255,255,.35);
      position:relative;
    }
    .posterFrame img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    /* Countdown */
    .countdown{
      margin-top: 16px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      width:100%;
    }
    .cd{
      border-radius: 22px;
      padding: 14px 10px;
      text-align:center;
      background: rgba(255,255,255,.58);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 50px rgba(20,20,40,.12);
    }
    .cdNum{
      font-weight: 1000;
      font-size: clamp(18px, 6vw, 24px);
      letter-spacing:.4px;
      color: rgba(31,36,48,.90);
    }
    .cdLbl{
      font-size: 11px;
      color: rgba(31,36,48,.55);
      margin-top: 2px;
      font-weight: 950;
      text-transform: uppercase;
      letter-spacing:.8px;
    }

    /* Subtle pulse animation for the "Talk..." line */
    .pulseLine{
      display:inline-block;
      animation: softPulse 2.8s ease-in-out infinite;
      font-weight: 1000;
      background: linear-gradient(90deg, #ff5aa5, #ff85c2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    @keyframes softPulse{
      0%   { transform: scale(1); opacity: .9; }
      50%  { transform: scale(1.06); opacity: 1; }
      100% { transform: scale(1); opacity: .9; }
    }
  </style>
</head>

<body>
  <div class="bg"></div>

  <div class="overlay" id="overlay">
    <img id="overlayImg" alt="overlay" />
  </div>

  <canvas class="fw" id="fw"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="app">
    <!-- PAGE 1: QUESTION -->
    <section class="page active" id="p1">
      <div class="center">
        <h1>Are you available this Saturday at 7pm?</h1>

        <div class="row">
          <button class="yes" id="yesBtn">Yes</button>
          <button class="no" id="noBtn">No</button>
        </div>

        <div class="noHint">(Do not click NO)</div>

        <div class="promptLine" id="promptLine">
          <div class="promptText" id="promptText"></div>
          <img class="promptMedia" id="promptImg" alt="cute reaction" />
          <div class="promptEmoji" id="promptEmoji" aria-hidden="true">ü•∫</div>
        </div>
      </div>
    </section>

    <!-- PAGE 2: YAAAAY -->
    <section class="page" id="p2">
      <div class="center" style="justify-content:flex-start;">
        <div class="yayText">Yaaaay</div>
        <div style="margin-top:auto;">
          <div class="row">
            <button class="primary" id="yayNext">Next</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PAGE 3: INVITATION -->
    <section class="page" id="p3">
      <div class="inviteLayout">
        <div class="inviteBigText">
          My dear Jalinka, I would like to invite you to a movie date with me.
          This Saturday, at <strong>8 PM</strong>, your time
        </div>

        <div class="bottomImg">
          <img src="999.jpeg" alt="invite image" />
          <div class="softOverlay"></div>
        </div>

        <div class="row" style="margin-top: 14px;">
          <button class="primary" id="itineraryBtn" style="display:none;">Itinerary of the night</button>
        </div>
      </div>
    </section>

    <!-- PAGE 4: ITINERARY -->
    <section class="page" id="p4">
      <div class="center" style="justify-content:flex-start; padding-top: 12px;">
        <h1 style="font-size:clamp(28px, 7.5vw, 42px);">Plan for the night</h1>

        <p style="font-size:clamp(16px, 5vw, 22px); color: rgba(31,36,48,.86); line-height:1.38;">
          ‚Ä¢ At 7PM we will go the store to grab our favorite snacks<br>
          ‚Ä¢ After that drive home and get cozy to watch the movie<br>
          ‚Ä¢ Then we will watch the movie and eat our snacks<br>
          ‚Ä¢ <span class="pulseLine">Talk aaaaaall niiiiiiight))</span><br><br>

          Please have your:<br>
          ‚Ä¢ Laptop<br>
          ‚Ä¢ Smile<br>
          ‚Ä¢ Your beautifull self<br>
          ‚Ä¢ All the jellycats<br>
          ‚Ä¢ You!<br>
          ‚Ä¢ Sasha on facetime plz))<br>
          ‚Ä¢ Oh and I forgot, please don't forget to bring yourself!
        </p>

        <div class="row" style="margin-top: 16px;">
          <button class="no" id="heartBtn" style="flex:0 0 64px; font-size:26px;">üíñ</button>
          <button class="primary" id="toPoster">Next</button>
        </div>
      </div>
    </section>

    <!-- PAGE 5: POSTER PAGE -->
    <section class="page" id="p5">
      <div class="posterLayout">
        <div class="posterTitleTop">Saturday Night Showing</div>

        <div class="posterFrame" aria-label="Movie poster">
          <img src="aboutTimePoster.jpg" alt="About Time poster" />
        </div>

        <div class="row" style="margin-top:auto;">
          <button class="primary" id="toCountdownBtn">Next</button>
        </div>
      </div>
    </section>

    <!-- PAGE 6: COUNTDOWN -->
    <section class="page" id="p6">
      <div class="center">
        <h2 style="font-size:clamp(28px, 7.5vw, 42px);">See you tomorrow at 7 üíò</h2>

        <div class="countdown" aria-live="polite">
          <div class="cd"><div class="cdNum" id="d">‚Äî</div><div class="cdLbl">Days</div></div>
          <div class="cd"><div class="cdNum" id="h">‚Äî</div><div class="cdLbl">Hours</div></div>
          <div class="cd"><div class="cdNum" id="m">‚Äî</div><div class="cdLbl">Min</div></div>
          <div class="cd"><div class="cdNum" id="s">‚Äî</div><div class="cdLbl">Sec</div></div>
        </div>

        <div class="row" style="margin-top: 18px;">
          <button class="primary" id="restartBtn">Start over</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    // ---------- Pages ----------
    const pages = {
      1: document.getElementById("p1"),
      2: document.getElementById("p2"),
      3: document.getElementById("p3"),
      4: document.getElementById("p4"),
      5: document.getElementById("p5"),
      6: document.getElementById("p6"),
    };
    function setActive(n){
      Object.values(pages).forEach(p => p.classList.remove("active"));
      pages[n].classList.add("active");
      window.scrollTo({ top: 0, behavior: "instant" });

      const fw = document.getElementById("fw");
      fw.style.display = (n === 2) ? "block" : "none";
    }
    function go(n){
      setActive(n);
      if(n === 3){
        const btn = document.getElementById("itineraryBtn");
        btn.style.display = "none";
        setTimeout(() => btn.style.display = "block", 4000);
      }
      if(n === 2){
        startFireworks();
        heartBurst(22);
      }
    }

    // ---------- Page 1: No-click sequence ----------
    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const promptText = document.getElementById("promptText");
    const promptImg  = document.getElementById("promptImg");
    const promptEmoji = document.getElementById("promptEmoji");
    const promptLine = document.getElementById("promptLine");

    const overlay = document.getElementById("overlay");
    const overlayImg = document.getElementById("overlayImg");

    let noCount = 0;
    let rotateIndex = 0;
    let locked = false;

    const baseSequence = [
      { text: "Huh?", img: "IMG_2534.jpg" },
      { text: "Can you please be?", img: "IMG_2526.jpg" },
      { text: "Pleeeeaaseeee?", emoji: "ü•∫" },
      { text: "–ù—É –ø–æ–∂–∞–∞–∞–∞–ª—É—Éuuuy—Å—Ç–∞–∞–∞–∞–∞", img: "IMG_2527.PNG" },
      { text: "I cry", img: "IMG_2528.PNG" },
      { text: "Wrong answer" },
      { text: "Mam, move your cursor to YES, then click on it!", img: "IMG_2533.jpg" },
      { img: "IMG_2535.jpg" },
      { fullscreenImg: "IMG_2536.jpg", duration: 2000, then: { text: "Ok, not funny haha anymore" } },
      { text: "Please click yes" },
    ];

    const rotation = [
      { img: "IMG_2530.JPG" },
      { text: "Clic YES" },
      { img: "IMG_2529.WEBP" },
      { text: "Wooow" },
      { text: "Ok plz stop" },
    ];

    function renderPrompt(item){
      promptImg.style.display = "none";
      promptEmoji.style.display = "none";
      promptText.textContent = item.text || "";

      if(item.img){
        promptImg.src = item.img;
        promptImg.style.display = "block";
      }
      if(item.emoji){
        promptEmoji.textContent = item.emoji;
        promptEmoji.style.display = "block";
      }

      promptLine.animate(
        [{ transform:"translateY(0)" }, { transform:"translateY(-2px)" }, { transform:"translateY(0)" }],
        { duration: 160, easing:"ease-out" }
      );
    }

    function showOverlay(src, ms){
      locked = true;
      overlayImg.src = src;
      overlay.style.display = "block";
      setTimeout(() => {
        overlay.style.display = "none";
        locked = false;
      }, ms);
    }

    noBtn.addEventListener("click", () => {
      if(locked) return;
      noCount++;

      if(noCount <= baseSequence.length){
        const item = baseSequence[noCount - 1];

        if(item.fullscreenImg){
          showOverlay(item.fullscreenImg, item.duration || 2000);
          setTimeout(() => {
            if(item.then) renderPrompt(item.then);
          }, (item.duration || 2000) + 10);
          return;
        }

        renderPrompt(item);
      } else {
        const item = rotation[rotateIndex % rotation.length];
        rotateIndex++;
        renderPrompt(item);
      }
    });

    // YES -> YAAAAY
    yesBtn.addEventListener("click", () => go(2));

    // ---------- Page 2: Fireworks + few hearts ----------
    const fwCanvas = document.getElementById("fw");
    const fwCtx = fwCanvas.getContext("2d", { alpha: true });

    let fwRunning = false;
    let fwParticles = [];

    function resizeFW(){
      fwCanvas.width = window.innerWidth * devicePixelRatio;
      fwCanvas.height = window.innerHeight * devicePixelRatio;
      fwCtx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeFW, { passive:true });
    resizeFW();

    function spawnBurst(){
      const x = 60 + Math.random() * (window.innerWidth - 120);
      const y = 120 + Math.random() * (window.innerHeight * 0.35);
      const count = 40;
      for(let i=0;i<count;i++){
        const a = Math.random() * Math.PI * 2;
        const sp = 1.2 + Math.random() * 3.2;
        fwParticles.push({
          x, y,
          vx: Math.cos(a) * sp,
          vy: Math.sin(a) * sp,
          life: 60 + Math.random()*40,
          hue: Math.floor(Math.random()*360),
          r: 1.2 + Math.random()*1.8
        });
      }
    }

    function stepFW(){
      if(!fwRunning) return;

      fwCtx.clearRect(0,0,window.innerWidth, window.innerHeight);

      if(Math.random() < 0.06) spawnBurst();

      fwParticles = fwParticles.filter(p => p.life > 0);
      for(const p of fwParticles){
        p.life -= 1;
        p.vy += 0.02;
        p.x += p.vx;
        p.y += p.vy;

        fwCtx.beginPath();
        fwCtx.fillStyle = `hsla(${p.hue}, 90%, 65%, ${Math.min(1, p.life/60)})`;
        fwCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        fwCtx.fill();
      }
      requestAnimationFrame(stepFW);
    }

    function startFireworks(){
      fwRunning = true;
      fwParticles = [];
      spawnBurst();
      spawnBurst();
      stepFW();
    }
    function stopFireworks(){
      fwRunning = false;
      fwParticles = [];
      fwCtx.clearRect(0,0,window.innerWidth, window.innerHeight);
    }

    document.getElementById("yayNext").addEventListener("click", () => {
      stopFireworks();
      go(3);
    });

    // Invitation -> itinerary
    document.getElementById("itineraryBtn").addEventListener("click", () => go(4));

    // ---------- Hearts (reduced) ----------
    const hearts = document.getElementById("hearts");
    const heartBtn = document.getElementById("heartBtn");
    const heartChars = ["üíñ","üíó","üíò","üíï","üíû","üíì","üíù"];

    function heartBurst(count = 45){
      hearts.style.display = "block";
      for(let i=0;i<count;i++){
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
        h.style.left = (Math.random()*100) + "vw";
        h.style.bottom = "-24px";
        h.style.fontSize = (18 + Math.random()*12) + "px";
        h.style.animationDuration = (3.0 + Math.random()*1.5) + "s";
        h.style.animationDelay = (Math.random()*0.20) + "s";
        hearts.appendChild(h);
        setTimeout(() => h.remove(), 5200);
      }
      setTimeout(() => {
        if(!hearts.querySelector(".heart")) hearts.style.display = "none";
      }, 5600);
    }

    heartBtn.addEventListener("click", () => heartBurst(45));

    // Itinerary -> poster
    document.getElementById("toPoster").addEventListener("click", () => go(5));

    // Poster -> countdown
    document.getElementById("toCountdownBtn").addEventListener("click", () => go(6));

    // ---------- Countdown ----------
    const dEl = document.getElementById("d");
    const hEl = document.getElementById("h");
    const mEl = document.getElementById("m");
    const sEl = document.getElementById("s");

    function getTargetDate(){
      const now = new Date();
      let year = now.getFullYear();
      let target = new Date(year, 1, 14, 19, 0, 0); // Feb 14, 7PM
      if(target.getTime() < now.getTime()){
        year += 1;
        target = new Date(year, 1, 14, 19, 0, 0);
      }
      return target;
    }
    const target = getTargetDate();

    function tick(){
      const now = new Date();
      let diff = Math.max(0, target - now);
      const sec = Math.floor(diff / 1000);
      const days = Math.floor(sec / 86400);
      const hrs  = Math.floor((sec % 86400) / 3600);
      const mins = Math.floor((sec % 3600) / 60);
      const secs = sec % 60;

      dEl.textContent = String(days);
      hEl.textContent = String(hrs).padStart(2,"0");
      mEl.textContent = String(mins).padStart(2,"0");
      sEl.textContent = String(secs).padStart(2,"0");
    }
    setInterval(tick, 250);
    tick();

    document.getElementById("restartBtn").addEventListener("click", () => {
      noCount = 0;
      rotateIndex = 0;
      promptText.textContent = "";
      promptImg.style.display = "none";
      promptEmoji.style.display = "none";
      go(1);
    });

    // Start
    setActive(1);
  </script>
</body>
</html>
